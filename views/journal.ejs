<%- include("partials/journal_header") %>

<body id="main">
    <div class="container">
        <header class="d-flex flex-wrap justify-content-md-end  justify-content-center py-3 mb-4 border-bottom">
          <ul class="nav nav-pills align-items-center">
            <li class="nav-item"><a href="/journal/entries" class="text-white nav-link nav-mission mission-topnav">View all Entries</a></li>
            <li class="nav-item"><a href="/breathe" class="text-white nav-link nav-mission mission-topnav">Take a Breather</a></li>
            <li class="nav-item"><a href="/quote" class="text-white nav-link nav-mission mission-topnav">Daily Quote</a></li>
            <li class="nav-item"><a href="/logout" class="nav-link"><button type="button" id="login-btn" class="btn btn-secondary">Logout</button></a></li>
            <a href="/" class="image-hover">
                <img src="/assets/ChilloutLogo_2.png" alt="ChillOut Logo" class="px-3" height="40px">
            </a>
          </ul>
        </header>
    </div>

    <div class="container mt-5 p-4" id="today-entry">
      <h1 class="display-5 main-text fw-normal d-flex justify-content-between align-items-center">
        <span>Today's Journal Entry</span>
        <span class="lead m-3 fw-normal"><%= new Date().toLocaleDateString() %></span>
      </h1>
      
      <hr />
      <form class="container" method="post" action="/journal/new">
        <div class="form-group mb-3">
          <input type="text" class="form-control form-control-lg" placeholder="Title of today's entry" id="newTitle" name="title" oninput="checkInputFieldsBefore()">
        </div>
        <div class="form-group mb-3">
          <textarea class="form-control" rows="9" placeholder="Pen down today's entry here" id="newContent" name="content" oninput="checkInputFieldsBefore()"></textarea>
        </div>
        <button type="submit" id="submitButton" class="btn btn-secondary" disabled>Submit</button>
      </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    <script>
      function checkInputFieldsBefore() {
        const title = document.getElementById('newTitle').value;
        const content = document.getElementById('newContent').value;
        const submitButton = document.getElementById('submitButton');
      
        if (title.trim() === '' || content.trim() === '') {
          submitButton.disabled = true;
        } else {
          submitButton.disabled = false;
        }
      }

      function checkInputFieldsAfter() {
        const title = document.getElementById('editTitle').value;
        const content = document.getElementById('editContent').value;
        const saveButton = document.getElementById('saveButton');
      
        if (title.trim() === '' || content.trim() === '') {
          saveButton.disabled = true;
        } else {
          saveButton.disabled = false;
        }
      }
    </script>
  </body>