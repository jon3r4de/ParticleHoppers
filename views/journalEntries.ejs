<%- include("partials/journal_header") %>

<body id="main">
    <div class="container">
        <header class="d-flex flex-wrap justify-content-md-end  justify-content-center py-3 mb-4 border-bottom">
          <ul class="nav nav-pills align-items-center">
            <li class="nav-item"><a href="/breathe" class="text-white nav-link nav-mission mission-topnav">Take a Breather</a></li>
            <li class="nav-item"><a href="/quote" class="text-white nav-link nav-mission mission-topnav">Daily Quote</a></li>
            <li class="nav-item"><a href="/logout" class="nav-link"><button type="button" id="login-btn" class="btn btn-secondary">Logout</button></a></li>
            <a href="/" class="image-hover">
                <img src="/assets/ChilloutLogo_2.png" alt="ChillOut Logo" class="px-3" height="40px">
            </a>
          </ul>
        </header>
    </div>

    <div class="container">
        <h1 class="display-5 main-text fw-normal"><%= username %>'s journal</h1>

        <% if (entries.length > 0) { %>
                <table class="table table-hover">
                    <thead>
                      <tr>
                        <th>Entry</th>
                        <th>Date Created</th>
                        <th></th>
                      </tr>
                    </thead>
                    <tbody class="table-group-divider">
                      <% entries.forEach(entry => { %>
                        <tr>
                          <td>
                            <p><strong><%= entry.title %></strong></p>
                            <p class="truncate"><%= entry.content.slice(0, 40) + "..."%></p>
                          </td>
                          <td><%= entry.createdAt.toDateString() %></td>
                          <td>
                            <form action="/journal/<%= entry._id %>?_method=DELETE" method="POST">
                                <button type="submit" class="btn btn-danger">Delete</button>
                            </form>
                           </td>
                        </tr>
                      <% }); %>
                    </tbody>
                  </table>
            
        <% } else { %>
          <p>No journal entries found. <a href="/journal">Create an entry now?</a></p>
        <% } %>
    </div>

</body>
